<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Il Mio Conto Bancario - RistoSmartFM</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="container mt-5">
        <h2>üè¶ Il Mio Conto Bancario</h2>
        <p class="text-muted">
            Inserisci i tuoi dati bancari per fare i pagamenti direttamente sul tuo conto.
            <strong>Nessuno, nemmeno gli amministratori, pu√≤ vedere i tuoi dati in chiaro.</strong>
        </p>

        <!-- ‚úÖ MESSAGGIO DI SICUREZZA -->
        <div class="alert alert-success">
            <strong>üîí I tuoi dati sono al sicuro:</strong><br>
            - L'IBAN viene crittografato con standard bancari (AES-256) prima di essere salvato.<br>
            - Non viene mai trasmesso in chiaro al browser.<br>
            - Non viene mai loggato n√© esposto in alcun modo.<br>
            - Solo tu puoi modificarlo o cancellarlo in qualsiasi momento.
        </div>
        {% if error_msg %}
        <div class="alert alert-danger" role="alert">{{ error_msg }}</div>
        {% endif %}
        {% if success_msg %}
        <div class="alert alert-success" role="alert">{{ success_msg }}</div>
        {% endif %}


        <form method="POST" action="{{ url_for('salva_profilo_bancario') }}">
            <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
            <div class="mb-3">
                <label for="nome_titolare" class="form-label">Nome del titolare *</label>
                <input type="text" class="form-control" id="nome_titolare" name="nome_titolare" required
                       value="{{ dati.nome_titolare or '' }}">
            </div>

            <div class="mb-3">
                <label for="iban" class="form-label">IBAN *</label>
                <input type="text" class="form-control" id="iban" name="iban" required
                       placeholder="IT..." value="{{ dati.iban or '' }}">
                <div class="form-text">Esempio: IT60X0542811101000000123456</div>
            </div>

            <div class="mb-3">
                <label for="bic" class="form-label">BIC/SWIFT (opzionale)</label>
                <input type="text" class="form-control" id="bic" name="bic"
                       value="{{ dati.bic or '' }}">
            </div>

            <div class="mb-3">
                <label for="indirizzo" class="form-label">Indirizzo del titolare *</label>
                <textarea class="form-control" id="indirizzo" name="indirizzo" rows="2" required>{{ dati.indirizzo_titolare or '' }}</textarea>
            </div>

            <button type="submit" class="btn btn-primary">üíæ Salva i miei dati bancari</button>
        </form>
    </div>
</body>
</html>
